<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title id="homePage">SIMS主页</title>
		<style>
			#appParent {
				height: 100%;
				width: 100%;
			}
			.username {
				position: absolute;
				top: 0px;
				right: 0px;
				margin: 20px 80px;
				z-index: 100;
			}
			.username a {
				margin: 10px 15px;
			}
			iframe {
				width: 100%;
				height: 100%;
				border: 0px;
			}
		</style>
		<!-- common.css -->
		<link rel="stylesheet" href="css/common.css" />
		<!-- Vue -->
		<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"></script>
		<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"></script>
	</head>
	<body>
		<div id="appParent">
			<div class="username">
				<a href="">用户名</a>
				<a href="" v-on:click.prevent="logout()">退出登录</a>
			</div>
			<iframe src="teacherHomePage.html"></iframe>
		</div>
		<script>
			var v=new Vue({
				el: '#appParent',
				data: {
					sessionId: "",
					urls: [
						'',
						'logout'
					]
				},
				methods: {
					logout: function() {
						var url=this.urls[1]+"?sessionId="+this.sessionId;
						var jsonData={};
		                //发送 post请求
		                this.$http.post(url, jsonData, {
		                	emulateJSON: true
		                }).then(function(res){
		                   	if(res.body==0) {
		                   		location.href="login.html";
		                   	} else if(res.body==1201) {
		                   		alert("用户名或会话id错误！");
		                   	}
		                },function(res){
		                    console.log(res);
		                });
					}
				},
				mounted() {
					this.sessionId=sessionStorage.getItem("sessionId");
				}
			});
		</script>
	</body>
</html>
