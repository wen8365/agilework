<!DOCTYPE html>
<html lang="zh">
	<head>
		<meta charset="UTF-8">
		<title id="homePage">SIMS主页</title>
		<style>
			#appParent {
				height: 100%;
				width: 100%;
			}
			.username {
				position: absolute;
				top: 0px;
				right: 0px;
				margin: 20px 80px;
				z-index: 100;
			}
			.username a {
				margin: 10px 15px;
			}
			iframe {
				width: 100%;
				height: 100%;
				border: 0px;
			}
		</style>
		<!-- common.css -->
		<link rel="stylesheet" href="css/common.css" />
		<script type="text/javascript" src="js/common.js" ></script>
		<!-- Vue -->
		<script src="https://cdn.staticfile.org/vue/2.2.2/vue.min.js"
				integrity="sha384-M5+vdn0ZJoRfNHbhVIuvYmIj44NZOP255FJMIWB9bzTbHEzWjE7fBh+rP+fwJ0OA"
				crossorigin="anonymous"></script>
		<script src="https://cdn.staticfile.org/vue-resource/1.5.1/vue-resource.min.js"
				integrity="sha384-hLzbDCl8NQhPSM4RaGXpfed+ihkiZc6a3yUwVFeTEtwnzeAFh80h/h5ouVI2M2HG"
				crossorigin="anonymous"></script>
	</head>
	<body>
		<div id="appParent">
			<div class="username">
				<a href="">用户名</a>
				<a href="" v-on:click.prevent="logout()">退出登录</a>
			</div>
			<iframe id="childPage" src="teacherHomePage.html"></iframe>
		</div>
		<script>
			var v=new Vue({
				el: '#appParent',
				data: {
					sessionId: "",
					urls: [
						'',
						'logout'
					]
				},
				methods: {
					logout: function() {
						var url=this.urls[1]+"?sessionId="+this.sessionId;
						var jsonData={};
						//发送 post请求
						this.$http.post(url, jsonData, {
							emulateJSON: true
						}).then(function(res){
							if(res.body==0) {
								location.href="login.html";
							} else if(res.body==1201) {
								alert("用户名或会话id错误！");
							}
						},function(res){
						    console.log(res);
						});
					}
				},
				mounted() {
					this.sessionId=sessionStorage.getItem("sessionId");
					if(sessionStorage.getItem("role")==0) {
						childPage.src="studentDetail.html";
					}
				}
			});
		</script>
	</body>
</html>
